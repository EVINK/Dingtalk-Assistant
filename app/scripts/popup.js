var __awaiter=this&&this.__awaiter||function(i,o,a,u){return new(a=a||Promise)(function(e,t){function n(e){try{s(u.next(e))}catch(e){t(e)}}function r(e){try{s(u.throw(e))}catch(e){t(e)}}function s(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}s((u=u.apply(i,o||[])).next())})},__generator=this&&this.__generator||function(n,r){var s,i,o,e,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){a.label=t[1];break}if(6===t[0]&&a.label<o[1]){a.label=o[1],o=t;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(t);break}o[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{s=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};new Vue({el:"#app",data:{fullScreen:!0,loginStatusPersistence:!0,fsSwitchAnimation:!1,lspSwitchAnimation:!1,menuOn:!1,menuClicked:!1,version:void 0,snapshotShortcut:["Ctrl","Alt","A"]},methods:{onFullScreen:function(){this.fullScreen=!0,this.fsSwitchAnimation=!0,StorageArea.set({fullScreen:!0}),sendMessage({fullScreen:!0})},offFullScreen:function(){this.fullScreen=!1,this.fsSwitchAnimation=!0,StorageArea.set({fullScreen:!1}),sendMessage({fullScreen:!1})},keepLoginStatus:function(){this.loginStatusPersistence=!0,this.lspSwitchAnimation=!0,StorageArea.set({loginStatusPersistence:!0}),sendMessage({bubble:"设置完成"}),sendMessage({checkLSPStatus:!0})},notKeepLoginStatus:function(){this.loginStatusPersistence=!1,this.lspSwitchAnimation=!0,StorageArea.set({loginStatusPersistence:!1}),sendMessage({bubble:"设置完成，下次重新登陆后将生效"})},clickMenu:function(){this.menuOn=!this.menuOn,this.menuClicked=!0},snapshot:function(){return chrome.tabs.captureVisibleTab(null,{},function(e){sendMessage({snapshot:e})})},openSettingPage:function(){chrome.tabs.create({url:chrome.extension.getURL("setting.html")})}},mounted:function(){return __awaiter(this,void 0,void 0,function(){var t,n,r,s;return __generator(this,function(e){switch(e.label){case 0:return t=chrome.runtime.getManifest(),this.version=t.version,n=this,[4,StorageArea.get("fullScreen")];case 1:return n.fullScreen=e.sent()||!1,r=this,[4,StorageArea.get("loginStatusPersistence")];case 2:return r.loginStatusPersistence=e.sent()||!1,[4,StorageArea.get("settings")];case 3:return(s=e.sent())&&(s.banSnapshotShortcut?this.snapshotShortcut=[]:this.snapshotShortcut=s.snapshotShortcut),[2]}})})}});