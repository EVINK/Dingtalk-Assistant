var __awaiter=this&&this.__awaiter||function(i,a,o,u){return new(o=o||Promise)(function(e,t){function n(e){try{r(u.next(e))}catch(e){t(e)}}function s(e){try{r(u.throw(e))}catch(e){t(e)}}function r(t){t.done?e(t.value):new o(function(e){e(t.value)}).then(n,s)}r((u=u.apply(i,a||[])).next())})},__generator=this&&this.__generator||function(n,s){var r,i,a,e,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,i=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(!(a=0<(a=o.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){o.label=t[1];break}if(6===t[0]&&o.label<a[1]){o.label=a[1],a=t;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(t);break}a[2]&&o.ops.pop(),o.trys.pop();continue}t=s.call(n,o)}catch(e){t=[6,e],i=0}finally{r=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};new Vue({el:"#app",data:{fullScreen:!0,loginStatusPersistence:!0,fsSwitchAnimation:!1,lspSwitchAnimation:!1,menuOn:!1,menuClicked:!1,version:void 0,snapshotShortcut:["Ctrl","Alt","A"],theme:"original"},methods:{onFullScreen:function(){this.fullScreen=!0,this.fsSwitchAnimation=!0,StorageArea.set({fullScreen:!0}),sendMessage({fullScreen:!0})},offFullScreen:function(){this.fullScreen=!1,this.fsSwitchAnimation=!0,StorageArea.set({fullScreen:!1}),sendMessage({fullScreen:!1})},keepLoginStatus:function(){this.loginStatusPersistence=!0,this.lspSwitchAnimation=!0,StorageArea.set({loginStatusPersistence:!0}),sendMessage({bubble:"设置完成"}),sendMessage({checkLSPStatus:!0})},notKeepLoginStatus:function(){this.loginStatusPersistence=!1,this.lspSwitchAnimation=!0,StorageArea.set({loginStatusPersistence:!1}),sendMessage({bubble:"设置完成，下次重新登陆后将生效"})},clickMenu:function(){this.menuOn=!this.menuOn,this.menuClicked=!0},snapshot:function(){return chrome.tabs.captureVisibleTab(null,{},function(e){sendMessage({snapshot:e})})},openSettingPage:function(){chrome.tabs.create({url:chrome.extension.getURL("setting.html")})},themeChanged:function(){sendMessage({theme:this.theme}),StorageArea.set({theme:this.theme}),"original"===this.theme&&sendMessage({bubble:"请刷新网页钉钉"})}},mounted:function(){return __awaiter(this,void 0,void 0,function(){var t,n,s,r,i;return __generator(this,function(e){switch(e.label){case 0:return t=chrome.runtime.getManifest(),this.version=t.version,n=this,[4,StorageArea.get("fullScreen")];case 1:return n.fullScreen=e.sent()||!1,s=this,[4,StorageArea.get("loginStatusPersistence")];case 2:return s.loginStatusPersistence=e.sent()||!1,[4,StorageArea.get("settings")];case 3:return(r=e.sent())&&(r.banSnapshotShortcut?this.snapshotShortcut=[]:this.snapshotShortcut=r.snapshotShortcut),i=this,[4,StorageArea.get("theme")];case 4:return i.theme=e.sent()||"original",[2]}})})}});